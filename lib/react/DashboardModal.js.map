{"version":3,"sources":["../../src/react/DashboardModal.js"],"names":["React","require","PropTypes","DashboardPlugin","basePropTypes","dashboard","h","createElement","DashboardModal","componentDidMount","uppy","props","options","id","onRequestCloseModal","onRequestClose","target","container","use","plugin","getPlugin","open","openModal","componentWillUnmount","removePlugin","componentWillReceiveProps","nextProps","closeModal","render","ref","Component","propTypes","window","instanceOf","HTMLElement","any","bool","func","closeModalOnClickOutside","disablePageScrollWhenModalOpen","defaultProps","module","exports"],"mappings":";;;;;;;;AAAA,IAAMA,QAAQC,QAAQ,OAAR,CAAd;AACA,IAAMC,YAAYD,QAAQ,YAAR,CAAlB;AACA,IAAME,kBAAkBF,QAAQ,sBAAR,CAAxB;AACA,IAAMG,gBAAgBH,QAAQ,aAAR,EAAuBI,SAA7C;;AAEA,IAAMC,IAAIN,MAAMO,aAAhB;;AAEA;;;;;IAKMC,c;;;;;;;;;2BACJC,iB,gCAAqB;AACnB,QAAMC,OAAO,KAAKC,KAAL,CAAWD,IAAxB;AACA,QAAME,UAAU,SACd,EAAEC,IAAI,sBAAN,EADc,EAEd,KAAKF,KAFS,EAGd;AACEG,2BAAqB,KAAKH,KAAL,CAAWI;AADlC,KAHc,CAAhB;;AAQA,QAAI,CAACH,QAAQI,MAAb,EAAqB;AACnBJ,cAAQI,MAAR,GAAiB,KAAKC,SAAtB;AACD;;AAED,WAAOL,QAAQF,IAAf;AACAA,SAAKQ,GAAL,CAASf,eAAT,EAA0BS,OAA1B;;AAEA,SAAKO,MAAL,GAAcT,KAAKU,SAAL,CAAeR,QAAQC,EAAvB,CAAd;AACA,QAAI,KAAKF,KAAL,CAAWU,IAAf,EAAqB;AACnB,WAAKF,MAAL,CAAYG,SAAZ;AACD;AACF,G;;2BAEDC,oB,mCAAwB;AACtB,QAAMb,OAAO,KAAKC,KAAL,CAAWD,IAAxB;;AAEAA,SAAKc,YAAL,CAAkB,KAAKL,MAAvB;AACD,G;;2BAEDM,yB,sCAA2BC,S,EAAW;AACpC,QAAI,KAAKf,KAAL,CAAWU,IAAX,IAAmB,CAACK,UAAUL,IAAlC,EAAwC;AACtC,WAAKF,MAAL,CAAYQ,UAAZ;AACD,KAFD,MAEO,IAAI,CAAC,KAAKhB,KAAL,CAAWU,IAAZ,IAAoBK,UAAUL,IAAlC,EAAwC;AAC7C,WAAKF,MAAL,CAAYG,SAAZ;AACD;AACF,G;;2BAEDM,M,qBAAU;AAAA;;AACR,WAAOtB,EAAE,KAAF,EAAS;AACduB,WAAK,aAACZ,SAAD,EAAe;AAClB,eAAKA,SAAL,GAAiBA,SAAjB;AACD;AAHa,KAAT,CAAP;AAKD,G;;;EA5C0BjB,MAAM8B,S;;AA+CnCtB,eAAeuB,SAAf,GAA2B,SAAc;AACvC;AACAf,UAAQ,OAAOgB,MAAP,KAAkB,WAAlB,GAAgC9B,UAAU+B,UAAV,CAAqBD,OAAOE,WAA5B,CAAhC,GAA2EhC,UAAUiC,GAFtD;AAGvCd,QAAMnB,UAAUkC,IAHuB;AAIvCrB,kBAAgBb,UAAUmC,IAJa;AAKvCC,4BAA0BpC,UAAUkC,IALG;AAMvCG,kCAAgCrC,UAAUkC;AANH,CAAd,EAOxBhC,aAPwB,CAA3B;;AASAI,eAAegC,YAAf,GAA8B,EAA9B;;AAGAC,OAAOC,OAAP,GAAiBlC,cAAjB","file":"DashboardModal.js","sourcesContent":["const React = require('react')\r\nconst PropTypes = require('prop-types')\r\nconst DashboardPlugin = require('../plugins/Dashboard')\r\nconst basePropTypes = require('./propTypes').dashboard\r\n\r\nconst h = React.createElement\r\n\r\n/**\r\n * React Component that renders a Dashboard for an Uppy instance in a Modal\r\n * dialog. Visibility of the Modal is toggled using the `open` prop.\r\n */\r\n\r\nclass DashboardModal extends React.Component {\r\n  componentDidMount () {\r\n    const uppy = this.props.uppy\r\n    const options = Object.assign(\r\n      { id: 'react:DashboardModal' },\r\n      this.props,\r\n      {\r\n        onRequestCloseModal: this.props.onRequestClose\r\n      }\r\n    )\r\n\r\n    if (!options.target) {\r\n      options.target = this.container\r\n    }\r\n\r\n    delete options.uppy\r\n    uppy.use(DashboardPlugin, options)\r\n\r\n    this.plugin = uppy.getPlugin(options.id)\r\n    if (this.props.open) {\r\n      this.plugin.openModal()\r\n    }\r\n  }\r\n\r\n  componentWillUnmount () {\r\n    const uppy = this.props.uppy\r\n\r\n    uppy.removePlugin(this.plugin)\r\n  }\r\n\r\n  componentWillReceiveProps (nextProps) {\r\n    if (this.props.open && !nextProps.open) {\r\n      this.plugin.closeModal()\r\n    } else if (!this.props.open && nextProps.open) {\r\n      this.plugin.openModal()\r\n    }\r\n  }\r\n\r\n  render () {\r\n    return h('div', {\r\n      ref: (container) => {\r\n        this.container = container\r\n      }\r\n    })\r\n  }\r\n}\r\n\r\nDashboardModal.propTypes = Object.assign({\r\n  // Only check this prop type in the browser.\r\n  target: typeof window !== 'undefined' ? PropTypes.instanceOf(window.HTMLElement) : PropTypes.any,\r\n  open: PropTypes.bool,\r\n  onRequestClose: PropTypes.func,\r\n  closeModalOnClickOutside: PropTypes.bool,\r\n  disablePageScrollWhenModalOpen: PropTypes.bool\r\n}, basePropTypes)\r\n\r\nDashboardModal.defaultProps = {\r\n}\r\n\r\nmodule.exports = DashboardModal\r\n"]}