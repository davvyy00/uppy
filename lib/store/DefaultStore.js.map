{"version":3,"sources":["../../src/store/DefaultStore.js"],"names":["DefaultStore","state","callbacks","getState","setState","patch","prevState","nextState","_publish","subscribe","listener","push","splice","indexOf","args","forEach","module","exports","defaultStore"],"mappings":";;;;AAAA;;;IAGMA,Y;AACJ,0BAAe;AAAA;;AACb,SAAKC,KAAL,GAAa,EAAb;AACA,SAAKC,SAAL,GAAiB,EAAjB;AACD;;yBAEDC,Q,uBAAY;AACV,WAAO,KAAKF,KAAZ;AACD,G;;yBAEDG,Q,qBAAUC,K,EAAO;AACf,QAAMC,YAAY,SAAc,EAAd,EAAkB,KAAKL,KAAvB,CAAlB;AACA,QAAMM,YAAY,SAAc,EAAd,EAAkB,KAAKN,KAAvB,EAA8BI,KAA9B,CAAlB;;AAEA,SAAKJ,KAAL,GAAaM,SAAb;AACA,SAAKC,QAAL,CAAcF,SAAd,EAAyBC,SAAzB,EAAoCF,KAApC;AACD,G;;yBAEDI,S,sBAAWC,Q,EAAU;AAAA;;AACnB,SAAKR,SAAL,CAAeS,IAAf,CAAoBD,QAApB;AACA,WAAO,YAAM;AACX;AACA,YAAKR,SAAL,CAAeU,MAAf,CACE,MAAKV,SAAL,CAAeW,OAAf,CAAuBH,QAAvB,CADF,EAEE,CAFF;AAID,KAND;AAOD,G;;yBAEDF,Q,uBAAmB;AAAA,sCAANM,IAAM;AAANA,UAAM;AAAA;;AACjB,SAAKZ,SAAL,CAAea,OAAf,CAAuB,UAACL,QAAD,EAAc;AACnCA,gCAAYI,IAAZ;AACD,KAFD;AAGD,G;;;;;AAGHE,OAAOC,OAAP,GAAiB,SAASC,YAAT,GAAyB;AACxC,SAAO,IAAIlB,YAAJ,EAAP;AACD,CAFD","file":"DefaultStore.js","sourcesContent":["/**\r\n * Default store that keeps state in a simple object.\r\n */\r\nclass DefaultStore {\r\n  constructor () {\r\n    this.state = {}\r\n    this.callbacks = []\r\n  }\r\n\r\n  getState () {\r\n    return this.state\r\n  }\r\n\r\n  setState (patch) {\r\n    const prevState = Object.assign({}, this.state)\r\n    const nextState = Object.assign({}, this.state, patch)\r\n\r\n    this.state = nextState\r\n    this._publish(prevState, nextState, patch)\r\n  }\r\n\r\n  subscribe (listener) {\r\n    this.callbacks.push(listener)\r\n    return () => {\r\n      // Remove the listener.\r\n      this.callbacks.splice(\r\n        this.callbacks.indexOf(listener),\r\n        1\r\n      )\r\n    }\r\n  }\r\n\r\n  _publish (...args) {\r\n    this.callbacks.forEach((listener) => {\r\n      listener(...args)\r\n    })\r\n  }\r\n}\r\n\r\nmodule.exports = function defaultStore () {\r\n  return new DefaultStore()\r\n}\r\n"]}