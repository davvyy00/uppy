{"version":3,"sources":["../../../src/plugins/StatusBar/index.js"],"names":["Plugin","require","Translator","StatusBarUI","statusBarStates","getSpeed","getBytesRemaining","prettyETA","prettyBytes","module","exports","uppy","opts","id","title","type","defaultLocale","strings","uploading","complete","uploadFailed","pleasePressRetry","paused","error","retry","cancel","pressToRetry","retryUpload","resumeUpload","cancelUpload","pauseUpload","filesUploadedOfTotal","dataUploadedOfTotal","xTimeLeft","uploadXFiles","uploadXNewFiles","defaultOptions","target","hideUploadButton","hideRetryButton","hidePauseResumeCancelButtons","showProgressDetails","locale","hideAfterFinish","translator","i18n","translate","bind","startUpload","render","install","getTotalSpeed","files","totalSpeed","forEach","file","progress","getTotalETA","totalBytesRemaining","reduce","total","Math","round","upload","catch","err","log","stack","message","getUploadingState","isAllErrored","isAllComplete","STATE_ERROR","STATE_COMPLETE","state","STATE_WAITING","fileIDs","Object","keys","i","length","uploadStarted","uploadComplete","STATE_UPLOADING","preprocess","STATE_PREPROCESSING","postprocess","STATE_POSTPROCESSING","uploadStartedFiles","filter","newFiles","completeFiles","erroredFiles","inProgressFiles","isPaused","processingFiles","inProgressFilesArray","map","totalETA","totalSize","totalUploadedSize","bytesTotal","bytesUploaded","isUploadStarted","totalProgress","isAllPaused","resumableUploads","capabilities","uploadState","inProgress","pauseAll","resumeAll","retryAll","cancelAll","mount","uninstall","unmount"],"mappings":"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","file":"index.js","sourcesContent":["const Plugin = require('../../core/Plugin')\r\nconst Translator = require('../../core/Translator')\r\nconst StatusBarUI = require('./StatusBar')\r\nconst statusBarStates = require('./StatusBarStates')\r\nconst getSpeed = require('../../utils/getSpeed')\r\nconst getBytesRemaining = require('../../utils/getBytesRemaining')\r\nconst prettyETA = require('../../utils/prettyETA')\r\nconst prettyBytes = require('prettier-bytes')\r\n\r\n/**\r\n * StatusBar: renders a status bar with upload/pause/resume/cancel/retry buttons,\r\n * progress percentage and time remaining.\r\n */\r\nmodule.exports = class StatusBar extends Plugin {\r\n  constructor (uppy, opts) {\r\n    super(uppy, opts)\r\n    this.id = this.opts.id || 'StatusBar'\r\n    this.title = 'StatusBar'\r\n    this.type = 'progressindicator'\r\n\r\n    const defaultLocale = {\r\n      strings: {\r\n        uploading: 'Uploading',\r\n        complete: 'Complete',\r\n        uploadFailed: 'Upload failed',\r\n        pleasePressRetry: 'Please press Retry to upload again',\r\n        paused: 'Paused',\r\n        error: 'Error',\r\n        retry: 'Retry',\r\n        cancel: 'Cancel',\r\n        pressToRetry: 'Press to retry',\r\n        retryUpload: 'Retry upload',\r\n        resumeUpload: 'Resume upload',\r\n        cancelUpload: 'Cancel upload',\r\n        pauseUpload: 'Pause upload',\r\n        filesUploadedOfTotal: {\r\n          0: '%{complete} of %{smart_count} file uploaded',\r\n          1: '%{complete} of %{smart_count} files uploaded'\r\n        },\r\n        dataUploadedOfTotal: '%{complete} of %{total}',\r\n        xTimeLeft: '%{time} left',\r\n        uploadXFiles: {\r\n          0: 'Upload %{smart_count} file',\r\n          1: 'Upload %{smart_count} files'\r\n        },\r\n        uploadXNewFiles: {\r\n          0: 'Upload +%{smart_count} file',\r\n          1: 'Upload +%{smart_count} files'\r\n        }\r\n      }\r\n    }\r\n\r\n    // set default options\r\n    const defaultOptions = {\r\n      target: 'body',\r\n      hideUploadButton: false,\r\n      hideRetryButton: false,\r\n      hidePauseResumeCancelButtons: false,\r\n      showProgressDetails: false,\r\n      locale: defaultLocale,\r\n      hideAfterFinish: true\r\n    }\r\n\r\n    // merge default options with the ones set by user\r\n    this.opts = Object.assign({}, defaultOptions, opts)\r\n\r\n    this.locale = Object.assign({}, defaultLocale, this.opts.locale)\r\n    this.locale.strings = Object.assign({}, defaultLocale.strings, this.opts.locale.strings)\r\n\r\n    this.translator = new Translator({locale: this.locale})\r\n    this.i18n = this.translator.translate.bind(this.translator)\r\n\r\n    this.startUpload = this.startUpload.bind(this)\r\n    this.render = this.render.bind(this)\r\n    this.install = this.install.bind(this)\r\n  }\r\n\r\n  getTotalSpeed (files) {\r\n    let totalSpeed = 0\r\n    files.forEach((file) => {\r\n      totalSpeed = totalSpeed + getSpeed(file.progress)\r\n    })\r\n    return totalSpeed\r\n  }\r\n\r\n  getTotalETA (files) {\r\n    const totalSpeed = this.getTotalSpeed(files)\r\n    if (totalSpeed === 0) {\r\n      return 0\r\n    }\r\n\r\n    const totalBytesRemaining = files.reduce((total, file) => {\r\n      return total + getBytesRemaining(file.progress)\r\n    }, 0)\r\n\r\n    return Math.round(totalBytesRemaining / totalSpeed * 10) / 10\r\n  }\r\n\r\n  startUpload () {\r\n    return this.uppy.upload().catch((err) => {\r\n      this.uppy.log(err.stack || err.message || err)\r\n      // Ignore\r\n    })\r\n  }\r\n\r\n  getUploadingState (isAllErrored, isAllComplete, files) {\r\n    if (isAllErrored) {\r\n      return statusBarStates.STATE_ERROR\r\n    }\r\n\r\n    if (isAllComplete) {\r\n      return statusBarStates.STATE_COMPLETE\r\n    }\r\n\r\n    let state = statusBarStates.STATE_WAITING\r\n    const fileIDs = Object.keys(files)\r\n    for (let i = 0; i < fileIDs.length; i++) {\r\n      const progress = files[fileIDs[i]].progress\r\n      // If ANY files are being uploaded right now, show the uploading state.\r\n      if (progress.uploadStarted && !progress.uploadComplete) {\r\n        return statusBarStates.STATE_UPLOADING\r\n      }\r\n      // If files are being preprocessed AND postprocessed at this time, we show the\r\n      // preprocess state. If any files are being uploaded we show uploading.\r\n      if (progress.preprocess && state !== statusBarStates.STATE_UPLOADING) {\r\n        state = statusBarStates.STATE_PREPROCESSING\r\n      }\r\n      // If NO files are being preprocessed or uploaded right now, but some files are\r\n      // being postprocessed, show the postprocess state.\r\n      if (progress.postprocess && state !== statusBarStates.STATE_UPLOADING && state !== statusBarStates.STATE_PREPROCESSING) {\r\n        state = statusBarStates.STATE_POSTPROCESSING\r\n      }\r\n    }\r\n    return state\r\n  }\r\n\r\n  render (state) {\r\n    const files = state.files\r\n\r\n    const uploadStartedFiles = Object.keys(files).filter((file) => {\r\n      return files[file].progress.uploadStarted\r\n    })\r\n    const newFiles = Object.keys(files).filter((file) => {\r\n      return !files[file].progress.uploadStarted &&\r\n        !files[file].progress.preprocess &&\r\n        !files[file].progress.postprocess\r\n    })\r\n    const completeFiles = Object.keys(files).filter((file) => {\r\n      return files[file].progress.uploadComplete\r\n    })\r\n    const erroredFiles = Object.keys(files).filter((file) => {\r\n      return files[file].error\r\n    })\r\n    const inProgressFiles = Object.keys(files).filter((file) => {\r\n      return !files[file].progress.uploadComplete &&\r\n             files[file].progress.uploadStarted &&\r\n             !files[file].isPaused\r\n    })\r\n    const processingFiles = Object.keys(files).filter((file) => {\r\n      return files[file].progress.preprocess || files[file].progress.postprocess\r\n    })\r\n\r\n    let inProgressFilesArray = inProgressFiles.map((file) => {\r\n      return files[file]\r\n    })\r\n\r\n    const totalSpeed = prettyBytes(this.getTotalSpeed(inProgressFilesArray))\r\n    const totalETA = prettyETA(this.getTotalETA(inProgressFilesArray))\r\n\r\n    // total size and uploaded size\r\n    let totalSize = 0\r\n    let totalUploadedSize = 0\r\n    inProgressFilesArray.forEach((file) => {\r\n      totalSize = totalSize + (file.progress.bytesTotal || 0)\r\n      totalUploadedSize = totalUploadedSize + (file.progress.bytesUploaded || 0)\r\n    })\r\n    totalSize = prettyBytes(totalSize)\r\n    totalUploadedSize = prettyBytes(totalUploadedSize)\r\n\r\n    const isUploadStarted = uploadStartedFiles.length > 0\r\n\r\n    const isAllComplete = state.totalProgress === 100 &&\r\n      completeFiles.length === Object.keys(files).length &&\r\n      processingFiles.length === 0\r\n\r\n    const isAllErrored = isUploadStarted &&\r\n      erroredFiles.length === uploadStartedFiles.length\r\n\r\n    const isAllPaused = inProgressFiles.length === 0 &&\r\n      !isAllComplete &&\r\n      !isAllErrored &&\r\n      uploadStartedFiles.length > 0\r\n\r\n    const resumableUploads = state.capabilities.resumableUploads || false\r\n\r\n    return StatusBarUI({\r\n      error: state.error,\r\n      uploadState: this.getUploadingState(isAllErrored, isAllComplete, state.files || {}),\r\n      totalProgress: state.totalProgress,\r\n      totalSize: totalSize,\r\n      totalUploadedSize: totalUploadedSize,\r\n      uploadStarted: uploadStartedFiles.length,\r\n      isAllComplete: isAllComplete,\r\n      isAllPaused: isAllPaused,\r\n      isAllErrored: isAllErrored,\r\n      isUploadStarted: isUploadStarted,\r\n      complete: completeFiles.length,\r\n      newFiles: newFiles.length,\r\n      inProgress: inProgressFiles.length,\r\n      totalSpeed: totalSpeed,\r\n      totalETA: totalETA,\r\n      files: state.files,\r\n      i18n: this.i18n,\r\n      pauseAll: this.uppy.pauseAll,\r\n      resumeAll: this.uppy.resumeAll,\r\n      retryAll: this.uppy.retryAll,\r\n      cancelAll: this.uppy.cancelAll,\r\n      startUpload: this.startUpload,\r\n      resumableUploads: resumableUploads,\r\n      showProgressDetails: this.opts.showProgressDetails,\r\n      hideUploadButton: this.opts.hideUploadButton,\r\n      hideRetryButton: this.opts.hideRetryButton,\r\n      hidePauseResumeCancelButtons: this.opts.hidePauseResumeCancelButtons,\r\n      hideAfterFinish: this.opts.hideAfterFinish\r\n    })\r\n  }\r\n\r\n  install () {\r\n    const target = this.opts.target\r\n    if (target) {\r\n      this.mount(target, this)\r\n    }\r\n  }\r\n\r\n  uninstall () {\r\n    this.unmount()\r\n  }\r\n}\r\n"]}